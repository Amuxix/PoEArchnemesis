package poe

import cats.effect.IO
import cats.syntax.foldable.*
import cats.syntax.traverse.*
import poe.Archnemesis.*
import poe.Bot
import poe.ColorSquare.*
import java.awt.Color

object RecipeFinder:
  val mappings: Map[ColorSquare, Archnemesis] = Map(
    List(List(new Color(-15064035), new Color(-11770086), new Color(-13085160), new Color(-16052452), new Color(-16448227)), List(new Color(-15786724), new Color(-16513763), new Color(-15657188), new Color(-13878762), new Color(-14932710)), List(new Color(-15854306), new Color(-16447714), new Color(-14866665), new Color(-13879785), new Color(-16184292)), List(new Color(-15590626), new Color(-11633900), new Color(-14864874), new Color(-16645603), new Color(-16579556)), List(new Color(-13810921), new Color(-7678715), new Color(-16118247), new Color(-16645604), new Color(-14602726))) -> Toxic,
    List(List(new Color(-5996859), new Color(-5475648), new Color(-8566370), new Color(-10408562), new Color(-11723635)), List(new Color(-6329141), new Color(-3178762), new Color(-6924104), new Color(-8898398), new Color(-3709199)), List(new Color(-8763732), new Color(-9290337), new Color(-8827996), new Color(-11128700), new Color(-4954416)), List(new Color(-4689438), new Color(-11720832), new Color(-7643477), new Color(-6265906), new Color(-7845939)), List(new Color(-1003531), new Color(-2845700), new Color(-7448640), new Color(-7647815), new Color(-8702252))) -> Chaosweaver,
    List(List(new Color(-12300459), new Color(-8087909), new Color(-6574669), new Color(-11642012), new Color(-12958130)), List(new Color(-13222587), new Color(-10721427), new Color(-9734535), new Color(-12629422), new Color(-13550781)), List(new Color(-13222589), new Color(-5458247), new Color(-9142912), new Color(-14012614), new Color(-13485500)), List(new Color(-12234410), new Color(-8089709), new Color(-10853529), new Color(-12629424), new Color(-13551037)), List(new Color(-11312792), new Color(-11511201), new Color(-11642528), new Color(-11575963), new Color(-13221558))) -> Frostweaver,
    List(List(new Color(-16514018), new Color(-14595554), new Color(-11879645), new Color(-12798939), new Color(-15520223)), List(new Color(-16579811), new Color(-15783395), new Color(-12211420), new Color(-12208082), new Color(-16116448)), List(new Color(-16514018), new Color(-16246242), new Color(-13466338), new Color(-12407510), new Color(-16381410)), List(new Color(-16514018), new Color(-16446690), new Color(-14917611), new Color(-13720561), new Color(-16377576)), List(new Color(-16514018), new Color(-16446948), new Color(-15444210), new Color(-14638839), new Color(-14062562))) -> Hasted,
    List(List(new Color(-15327971), new Color(-15065314), new Color(-14340834), new Color(-14337508), new Color(-14005735)), List(new Color(-13087972), new Color(-14274530), new Color(-13813986), new Color(-14603490), new Color(-13286372)), List(new Color(-10581467), new Color(-13087460), new Color(-14207975), new Color(-13020903), new Color(-12690918)), List(new Color(-8675704), new Color(-10916053), new Color(-12758761), new Color(-12693978), new Color(-14536935)), List(new Color(-9534133), new Color(-11244766), new Color(-12496102), new Color(-14867685), new Color(-14538725))) -> Deadeye,
    List(List(new Color(-482980), new Color(-1298153), new Color(-560857), new Color(-928990), new Color(-2849245)), List(new Color(-475553), new Color(-452343), new Color(-167384), new Color(-408789), new Color(-1396389)), List(new Color(-221094), new Color(-309993), new Color(-162006), new Color(-202465), new Color(-464248)), List(new Color(-99800), new Color(-2015454), new Color(-1347543), new Color(-205513), new Color(-594506)), List(new Color(-346532), new Color(-1090273), new Color(-1287140), new Color(-535485), new Color(-1778000))) -> Flameweaver,
    List(List(new Color(-10072775), new Color(-14215392), new Color(-12769501), new Color(-11980765), new Color(-13492705)), List(new Color(-15200738), new Color(-16448483), new Color(-14280930), new Color(-12704480), new Color(-14872289)), List(new Color(-9155790), new Color(-14215136), new Color(-11850460), new Color(-10536153), new Color(-11719131)), List(new Color(-7116479), new Color(-7248063), new Color(-4158637), new Color(-3435947), new Color(-3766193)), List(new Color(-9089484), new Color(-11455704), new Color(-10601944), new Color(-10338776), new Color(-12376287))) -> Sentinel,
    List(List(new Color(-8088540), new Color(-9139935), new Color(-11506147), new Color(-12032747), new Color(-12364771)), List(new Color(-6710167), new Color(-10126558), new Color(-10979559), new Color(-11440356), new Color(-10390739)), List(new Color(-6906533), new Color(-8284874), new Color(-10653918), new Color(-12626403), new Color(-10324696)), List(new Color(-14142953), new Color(-10848472), new Color(-6503387), new Color(-8537586), new Color(-9326820)), List(new Color(-11972579), new Color(-11111121), new Color(-9466847), new Color(-10386409), new Color(-10323165))) -> Overcharged,
    List(List(new Color(-5571342), new Color(-3342595), new Color(-12655144), new Color(-15106361), new Color(-14659365)), List(new Color(-3867148), new Color(-9044502), new Color(-13973773), new Color(-14197546), new Color(-14263866)), List(new Color(-8979491), new Color(-14681893), new Color(-14515736), new Color(-14858544), new Color(-15980103)), List(new Color(-5243910), new Color(-9896707), new Color(-11750678), new Color(-13404707), new Color(-14526754)), List(new Color(-7341324), new Color(-8716546), new Color(-9443854), new Color(-11821851), new Color(-12411669))) -> ArcaneBuffer,
    List(List(new Color(-14803689), new Color(-14146527), new Color(-14277862), new Color(-14278117), new Color(-14409961)), List(new Color(-14475237), new Color(-14343651), new Color(-14080482), new Color(-13817569), new Color(-13225691)), List(new Color(-14409189), new Color(-13817055), new Color(-13487837), new Color(-13487839), new Color(-12501966)), List(new Color(-14343393), new Color(-13751005), new Color(-13817058), new Color(-13290715), new Color(-12765141)), List(new Color(-13553875), new Color(-12961489), new Color(-14145766), new Color(-13752035), new Color(-12436687))) -> Gargantuan,
    List(List(new Color(-15727095), new Color(-13229556), new Color(-11777471), new Color(-7104364), new Color(-5392467)), List(new Color(-13762033), new Color(-15334643), new Color(-14282484), new Color(-10464950), new Color(-8288640)), List(new Color(-12385774), new Color(-12975600), new Color(-15072501), new Color(-14085108), new Color(-13230057)), List(new Color(-13237487), new Color(-13696754), new Color(-15662582), new Color(-15003629), new Color(-11843513)), List(new Color(-12836597), new Color(-15397880), new Color(-14608623), new Color(-9607063), new Color(-4669770))) -> TukohamaTouched,
    List(List(new Color(-15724514), new Color(-14602684), new Color(-12956041), new Color(-14602153), new Color(-15657695)), List(new Color(-14011825), new Color(-13417374), new Color(-13680284), new Color(-14932924), new Color(-15723748)), List(new Color(-9862734), new Color(-15064262), new Color(-15526364), new Color(-14933705), new Color(-15065039)), List(new Color(-12760725), new Color(-16250862), new Color(-15263195), new Color(-15065044), new Color(-15130834)), List(new Color(-14342318), new Color(-14934995), new Color(-15197144), new Color(-15130572), new Color(-15526107))) -> Malediction,
    List(List(new Color(-143780), new Color(-534667), new Color(-404374), new Color(-1130395), new Color(-2050715)), List(new Color(-3241438), new Color(-2589921), new Color(-2256083), new Color(-1926083), new Color(-2649528)), List(new Color(-5677555), new Color(-1736702), new Color(-3439549), new Color(-990290), new Color(-656148)), List(new Color(-3976949), new Color(-3581941), new Color(-5494774), new Color(-4300233), new Color(-3362435)), List(new Color(-1529301), new Color(-4224685), new Color(-4951757), new Color(-5020106), new Color(-6402023))) -> Incendiary,
    List(List(new Color(-9714472), new Color(-15521727), new Color(-16513505), new Color(-16248538), new Color(-15984340)), List(new Color(-10250586), new Color(-16380378), new Color(-15918802), new Color(-15720653), new Color(-16050132)), List(new Color(-13612195), new Color(-16184029), new Color(-14074545), new Color(-15522503), new Color(-16116694)), List(new Color(-16181975), new Color(-15853525), new Color(-15391689), new Color(-16446428), new Color(-15786701)), List(new Color(-16183003), new Color(-15326154), new Color(-15392203), new Color(-16116439), new Color(-15918289))) -> Dynamo,
    List(List(new Color(-14665206), new Color(-14400239), new Color(-11048876), new Color(-7236209), new Color(-4407884)), List(new Color(-14206701), new Color(-14075375), new Color(-13943027), new Color(-13017805), new Color(-7498357)), List(new Color(-13614820), new Color(-13417445), new Color(-13154283), new Color(-13482992), new Color(-13807330)), List(new Color(-13549284), new Color(-13351909), new Color(-13154281), new Color(-13482991), new Color(-13546200)), List(new Color(-14009835), new Color(-13680621), new Color(-13812721), new Color(-13084367), new Color(-5986651))) -> Rejuvenating,
    List(List(new Color(-8834542), new Color(-8309230), new Color(-7258864), new Color(-6273777), new Color(-5486066)), List(new Color(-13298918), new Color(-12970470), new Color(-12116968), new Color(-11591655), new Color(-10869479)), List(new Color(-13889510), new Color(-13430502), new Color(-13430503), new Color(-13561831), new Color(-13693158)), List(new Color(-10343914), new Color(-9096684), new Color(-8243181), new Color(-7389936), new Color(-7390961)), List(new Color(-14349030), new Color(-13627111), new Color(-13167848), new Color(-12446185), new Color(-12512489))) -> Berserker,
    List(List(new Color(-9606004), new Color(-9145201), new Color(-8092262), new Color(-7303006), new Color(-7763300)), List(new Color(-5855561), new Color(-5461062), new Color(-5328964), new Color(-4868415), new Color(-5131587)), List(new Color(-9408340), new Color(-10000476), new Color(-10460768), new Color(-10526562), new Color(-11118441)), List(new Color(-12305001), new Color(-14869128), new Color(-15395471), new Color(-15921558), new Color(-16579247)), List(new Color(-13358199), new Color(-15790507), new Color(-15527100), new Color(-14934724), new Color(-13289913))) -> MirrorImage,
    List(List(new Color(-15059395), new Color(-10264227), new Color(-4672344), new Color(-5789043), new Color(-8946329)), List(new Color(-16775669), new Color(-15652815), new Color(-9536130), new Color(-7239305), new Color(-12105414)), List(new Color(-16777216), new Color(-16709106), new Color(-15846080), new Color(-14605786), new Color(-13619153)), List(new Color(-16777216), new Color(-16710649), new Color(-14932180), new Color(-10329505), new Color(-6317691)), List(new Color(-16706791), new Color(-15128527), new Color(-7170925), new Color(-2173255), new Color(-2368596))) -> BrineKingTouched,
    List(List(new Color(-11794934), new Color(-11861752), new Color(-11205367), new Color(-8179420), new Color(-5541272)), List(new Color(-11074030), new Color(-10418931), new Color(-10615283), new Color(-10616310), new Color(-8911354)), List(new Color(-11991016), new Color(-9631470), new Color(-8779249), new Color(-8844529), new Color(-8910839)), List(new Color(-11204330), new Color(-11139053), new Color(-9303536), new Color(-7468276), new Color(-7076347)), List(new Color(-9435636), new Color(-12515565), new Color(-11270386), new Color(-10288120), new Color(-8976379))) -> Vampiric,
    List(List(new Color(-8374233), new Color(-8431030), new Color(-7518679), new Color(-6525880), new Color(-7188941)), List(new Color(-10012115), new Color(-8823224), new Color(-8699867), new Color(-5076388), new Color(-6201533)), List(new Color(-10011601), new Color(-9085115), new Color(-8758740), new Color(-3032217), new Color(-6265017)), List(new Color(-9616593), new Color(-10596559), new Color(-7715549), new Color(-3441346), new Color(-7775173)), List(new Color(-9550026), new Color(-11257043), new Color(-6726609), new Color(-10540523), new Color(-10010327))) -> Juggernaut,
    List(List(new Color(-8073773), new Color(-4788764), new Color(-10298388), new Color(-13771038), new Color(-14852184)), List(new Color(-11815208), new Color(-6037801), new Color(-9180947), new Color(-13509661), new Color(-13079108)), List(new Color(-11482649), new Color(-9120284), new Color(-9123350), new Color(-10696476), new Color(-12223801)), List(new Color(-10689550), new Color(-9576466), new Color(-11555102), new Color(-11420455), new Color(-14319422)), List(new Color(-14505743), new Color(-5970454), new Color(-8528926), new Color(-13255208), new Color(-14252105))) -> Stormweaver,
    List(List(new Color(-7508926), new Color(-5410493), new Color(-9729659), new Color(-7959670), new Color(-4802907)), List(new Color(-1389944), new Color(-1210059), new Color(-2560854), new Color(-5909106), new Color(-7697541)), List(new Color(-66855), new Color(-224721), new Color(-65668), new Color(-262719), new Color(-3288880)), List(new Color(-79247), new Color(-152518), new Color(-380), new Color(-394053), new Color(-4142642)), List(new Color(-139583), new Color(-92116), new Color(-270001), new Color(-3418779), new Color(-7301223))) -> Evocationist,
    List(List(new Color(-2660606), new Color(-5285376), new Color(-7646718), new Color(-9950720), new Color(-11659774)), List(new Color(-1996516), new Color(-2456037), new Color(-3504101), new Color(-4880339), new Color(-6262235)), List(new Color(-2646711), new Color(-1398974), new Color(-1458858), new Color(-2506654), new Color(-3694015)), List(new Color(-4699868), new Color(-6931175), new Color(-4295388), new Color(-4428256), new Color(-5817082)), List(new Color(-14678510), new Color(-12122105), new Color(-12646395), new Color(-11135995), new Color(-10283006))) -> FlameStrider,
    List(List(new Color(-11048850), new Color(-10126720), new Color(-10195344), new Color(-7434104), new Color(-4670806)), List(new Color(-8547944), new Color(-10127234), new Color(-9533295), new Color(-9928821), new Color(-7697274)), List(new Color(-4598561), new Color(-6508103), new Color(-9863548), new Color(-10059896), new Color(-10191483)), List(new Color(-5850686), new Color(-5455159), new Color(-8087138), new Color(-6704714), new Color(-9797496)), List(new Color(-7363411), new Color(-8810602), new Color(-6441801), new Color(-6969943), new Color(-6447720))) -> FrostStrider,
    List(List(new Color(-13036779), new Color(-9938606), new Color(-6973813), new Color(-4472141), new Color(-4734555)), List(new Color(-14870760), new Color(-14280417), new Color(-11128268), new Color(-6843768), new Color(-7298159)), List(new Color(-14608359), new Color(-14148063), new Color(-14016222), new Color(-12115937), new Color(-12637397)), List(new Color(-14804968), new Color(-14016993), new Color(-13885407), new Color(-12179673), new Color(-9672351)), List(new Color(-14870247), new Color(-14804453), new Color(-11522510), new Color(-5658463), new Color(-2102323))) -> Executioner,
    List(List(new Color(-2960685), new Color(-5066060), new Color(-9079427), new Color(-8158068), new Color(-8223604)), List(new Color(-3816764), new Color(-5198673), new Color(-6382434), new Color(-7697264), new Color(-8158328)), List(new Color(-8883338), new Color(-6514541), new Color(-5133404), new Color(-5330525), new Color(-10922670)), List(new Color(-4210753), new Color(-4736837), new Color(-5986641), new Color(-5591889), new Color(-6052956)), List(new Color(-7171178), new Color(-6644576), new Color(-6775645), new Color(-8157037), new Color(-8486006))) -> SteelInfused,
    List(List(new Color(-15307203), new Color(-11376042), new Color(-7106425), new Color(-4277585), new Color(-4342109)), List(new Color(-14323136), new Color(-13995961), new Color(-13795252), new Color(-7368828), new Color(-6058874)), List(new Color(-13862069), new Color(-13928115), new Color(-13595571), new Color(-14514877), new Color(-14073812)), List(new Color(-13994164), new Color(-13860785), new Color(-13726900), new Color(-14191038), new Color(-10000801)), List(new Color(-14192316), new Color(-13796025), new Color(-14123958), new Color(-5792613), new Color(-1189180))) -> Necromancer,
    List(List(new Color(-9627360), new Color(-10351599), new Color(-7796983), new Color(-10875888), new Color(-11793137)), List(new Color(-13232610), new Color(-9168100), new Color(-8712434), new Color(-9828339), new Color(-9368049)), List(new Color(-11925487), new Color(-9762293), new Color(-7795955), new Color(-8188139), new Color(-11137521)), List(new Color(-9301992), new Color(-7205616), new Color(-5568500), new Color(-11268847), new Color(-10940656)), List(new Color(-10745844), new Color(-6617334), new Color(-8845300), new Color(-12841969), new Color(-10023408))) -> Bloodletter,
    List(List(new Color(-14476262), new Color(-14472157), new Color(-11769766), new Color(-7366516), new Color(-4407117)), List(new Color(-14022374), new Color(-13433064), new Color(-13103337), new Color(-13546435), new Color(-7694198)), List(new Color(-14481379), new Color(-13037539), new Color(-12776934), new Color(-12774119), new Color(-13944026)), List(new Color(-11978193), new Color(-11775431), new Color(-11781333), new Color(-11849697), new Color(-14007251)), List(new Color(-14131659), new Color(-12105679), new Color(-11985638), new Color(-13611715), new Color(-6050909))) -> EmpoweringMinions,
    List(List(new Color(-13482678), new Color(-13419198), new Color(-12693162), new Color(-9531760), new Color(-11307662)), List(new Color(-12760499), new Color(-13813441), new Color(-14074558), new Color(-11044485), new Color(-9792628)), List(new Color(-14076869), new Color(-14471883), new Color(-13280418), new Color(-12293266), new Color(-9401720)), List(new Color(-13875894), new Color(-14010050), new Color(-12096402), new Color(-10252659), new Color(-8282214)), List(new Color(-13874867), new Color(-14205631), new Color(-12360345), new Color(-10385786), new Color(-11113621))) -> SoulConduit,
    List(List(new Color(-16632513), new Color(-15644844), new Color(-10788252), new Color(-6909303), new Color(-4146005)), List(new Color(-16633285), new Color(-16695222), new Color(-16692394), new Color(-13477529), new Color(-7106936)), List(new Color(-16569033), new Color(-16628658), new Color(-16691623), new Color(-16559525), new Color(-14855843)), List(new Color(-16309198), new Color(-16566207), new Color(-16692138), new Color(-16623515), new Color(-14201254)), List(new Color(-15510434), new Color(-16692138), new Color(-16691621), new Color(-13740186), new Color(-5528931))) -> StormStrider,
    List(List(new Color(-6617582), new Color(-11722968), new Color(-3443599), new Color(-4037019), new Color(-6480868)), List(new Color(-7535599), new Color(-10672852), new Color(-2916226), new Color(-3642780), new Color(-5758430)), List(new Color(-7337196), new Color(-9102814), new Color(-3705744), new Color(-3244683), new Color(-4836307)), List(new Color(-6680810), new Color(-7599337), new Color(-4437173), new Color(-3182740), new Color(-4700866)), List(new Color(-3010800), new Color(-1047547), new Color(-3005402), new Color(-4697778), new Color(-4502977))) -> Frenzied,
    List(List(new Color(-10065555), new Color(-9802639), new Color(-9868182), new Color(-7565434), new Color(-4802135)), List(new Color(-9342344), new Color(-8881536), new Color(-7039075), new Color(-7302507), new Color(-7631483)), List(new Color(-7763311), new Color(-6513502), new Color(-4276543), new Color(-4408130), new Color(-7763316)), List(new Color(-7236454), new Color(-6381915), new Color(-4671557), new Color(-4474179), new Color(-8947589)), List(new Color(-8552059), new Color(-8091508), new Color(-7630699), new Color(-7828335), new Color(-6513257))) -> Assassin,
    List(List(new Color(-14151404), new Color(-13492452), new Color(-10395560), new Color(-7104626), new Color(-4406603)), List(new Color(-14019051), new Color(-13889262), new Color(-14285810), new Color(-12371403), new Color(-7302260)), List(new Color(-12311025), new Color(-12048891), new Color(-11063294), new Color(-10403838), new Color(-11191013)), List(new Color(-7902699), new Color(-7047156), new Color(-6716672), new Color(-9741052), new Color(-12504280)), List(new Color(-7304436), new Color(-7634942), new Color(-10925822), new Color(-11715532), new Color(-5920858))) -> Entangler,
    List(List(new Color(-9590558), new Color(-7229752), new Color(-7567995), new Color(-7566201), new Color(-4802650)), List(new Color(-9659931), new Color(-4929058), new Color(-7754264), new Color(-10448185), new Color(-7763068)), List(new Color(-9002255), new Color(-5186068), new Color(-12941083), new Color(-9388573), new Color(-8147775)), List(new Color(-5978638), new Color(-3810577), new Color(-3615769), new Color(-4077082), new Color(-7826003)), List(new Color(-8211224), new Color(-4405023), new Color(-2828829), new Color(-6247231), new Color(-6580077))) -> HeraldingMinions,
    List(List(new Color(-11915754), new Color(-11325163), new Color(-10462382), new Color(-7170930), new Color(-4472652)), List(new Color(-11256796), new Color(-12967153), new Color(-13099767), new Color(-11257552), new Color(-7171702)), List(new Color(-10729941), new Color(-10207980), new Color(-9617387), new Color(-13031401), new Color(-12179170)), List(new Color(-13032172), new Color(-6263500), new Color(-9220828), new Color(-13491179), new Color(-12111577)), List(new Color(-14937589), new Color(-12505833), new Color(-12966632), new Color(-11585744), new Color(-5986653))) -> DroughtBringer,
    List(List(new Color(-16645877), new Color(-16055287), new Color(-13425376), new Color(-10921132), new Color(-6511717)), List(new Color(-14876400), new Color(-15466226), new Color(-16514804), new Color(-15792628), new Color(-10790569)), List(new Color(-13496297), new Color(-13694957), new Color(-14286577), new Color(-16317940), new Color(-14545650)), List(new Color(-13364712), new Color(-13826285), new Color(-14548721), new Color(-16121589), new Color(-16055543)), List(new Color(-14679535), new Color(-15399665), new Color(-16055285), new Color(-15925241), new Color(-11975097))) -> AbberathTouched,
    List(List(new Color(-15971222), new Color(-16223348), new Color(-16501442), new Color(-16371906), new Color(-16513761)), List(new Color(-16033413), new Color(-16434095), new Color(-16641757), new Color(-16644833), new Color(-16513504)), List(new Color(-15784891), new Color(-15520429), new Color(-16112564), new Color(-15912110), new Color(-16242617)), List(new Color(-16039576), new Color(-16246480), new Color(-16248280), new Color(-16181975), new Color(-16512991)), List(new Color(-16625301), new Color(-16493444), new Color(-16506570), new Color(-16643294), new Color(-16579553))) -> Echoist,
    List(List(new Color(-10998960), new Color(-12116401), new Color(-10331295), new Color(-7301751), new Color(-4603475)), List(new Color(-8495500), new Color(-12379053), new Color(-11656361), new Color(-11061408), new Color(-7433848)), List(new Color(-6717284), new Color(-9219715), new Color(-11654548), new Color(-12180131), new Color(-12245931)), List(new Color(-4542272), new Color(-8363887), new Color(-11851666), new Color(-12508318), new Color(-12374956)), List(new Color(-9544575), new Color(-11851935), new Color(-11458466), new Color(-11586204), new Color(-6051940))) -> Hexer,
    List(List(new Color(-6312400), new Color(-16245486), new Color(-16576748), new Color(-15458531), new Color(-12631998)), List(new Color(-6073019), new Color(-13690323), new Color(-14935496), new Color(-14540271), new Color(-16315374)), List(new Color(-13884893), new Color(-15332561), new Color(-14277821), new Color(-13294312), new Color(-15793387)), List(new Color(-13012466), new Color(-16512215), new Color(-15068635), new Color(-15268587), new Color(-16316134)), List(new Color(-12252901), new Color(-15265245), new Color(-15789797), new Color(-15132125), new Color(-13355462))) -> TemporalBubble,
    List(List(new Color(-15323330), new Color(-14205873), new Color(-10327703), new Color(-6973813), new Color(-4342356)), List(new Color(-15654085), new Color(-14867637), new Color(-15521469), new Color(-12167585), new Color(-6973299)), List(new Color(-15064248), new Color(-14669746), new Color(-15127988), new Color(-15651516), new Color(-13547693)), List(new Color(-15065529), new Color(-14074014), new Color(-12235647), new Color(-14469022), new Color(-13285295)), List(new Color(-15720902), new Color(-14268321), new Color(-12042622), new Color(-11971204), new Color(-5789539))) -> EmpoweredElements,
    List(List(new Color(-12897246), new Color(-12371670), new Color(-13235963), new Color(-12369866), new Color(-8818337)), List(new Color(-9808334), new Color(-12372438), new Color(-12833506), new Color(-7308191), new Color(-7766417)), List(new Color(-15134201), new Color(-15988988), new Color(-13491694), new Color(-9083837), new Color(-8687786)), List(new Color(-14476265), new Color(-15990271), new Color(-12581886), new Color(-12372700), new Color(-8095907)), List(new Color(-11583961), new Color(-14146020), new Color(-9624550), new Color(-12179174), new Color(-12831451))) -> Bonebreaker,
    List(List(new Color(-9882085), new Color(-7058410), new Color(-7647723), new Color(-6524911), new Color(-4549108)), List(new Color(-10669799), new Color(-7453165), new Color(-8042477), new Color(-5143279), new Color(-2969327)), List(new Color(-5340873), new Color(-3305930), new Color(-5208528), new Color(-3559882), new Color(-2242758)), List(new Color(-4684487), new Color(-2974663), new Color(-3039430), new Color(-2512073), new Color(-2508492)), List(new Color(-8964330), new Color(-6796271), new Color(-8303597), new Color(-6784751), new Color(-4677876))) -> Bombardier,
    List(List(new Color(-13885407), new Color(-13291735), new Color(-11057878), new Color(-10204125), new Color(-12045290)), List(new Color(-14803677), new Color(-15004150), new Color(-10531549), new Color(-5075131), new Color(-9416925)), List(new Color(-12307681), new Color(-10333897), new Color(-10006487), new Color(-9613019), new Color(-8822468)), List(new Color(-10661843), new Color(-3618624), new Color(-5658716), new Color(-8427204), new Color(-6719692)), List(new Color(-10796250), new Color(-9674681), new Color(-7897502), new Color(-7110055), new Color(-6517916))) -> Opulent,
  )

  def findNemesis(square: ColorSquare): Option[Archnemesis] = mappings.collectFirst {
    case (nemesisSquare, nemesis) if nemesisSquare.matches(square, 1) => nemesis
  }

  val startX = 190
  val startY = 454
  val columnSizes = List(73, 73, 73, 72, 73, 73, 73)
  val lineSizes =   List(73, 73, 73, 73, 72, 73, 73)
  val lineMap = List.range(0, 8).map(i => i -> lineSizes.take(i).sum).toMap
  val columnMap = List.range(0, 8).map(i => i -> columnSizes.take(i).sum).toMap

  @inline def squareAt(x: Int, y: Int, size: Int): IO[ColorSquare] = Bot.colorSquare(startX + lineMap(x), startY + columnMap(y), size)

  def extract(n: Int, size: Int): IO[List[ColorSquare]] =
    List.tabulate(n)(i => squareAt(i % 8, i / 8, size)).sequence

  val extractSize = 5
  val parseSize = 2

  val extractMappings: IO[Unit] =
    val nemesis = List(
      Bonebreaker,
      Overcharged,
    )
    extract(nemesis.size, extractSize).flatMap { extracted =>
      nemesis.zip(extracted).traverse_ {
        case (nemesis, colors) =>
          val colorText = colors.map(_.map(c => s"new Color(${c.getRGB})"))
          IO.println(s"$colorText -> $nemesis,")
      }
    }

  val extractAll: IO[List[Option[Archnemesis]]] = extract(8*8, parseSize).map(_.map(findNemesis))

  def printGrid(extracted: List[Option[Archnemesis]]): IO[Unit] =
    val parsed = extracted.map(_.fold("Match failed")(_.toString))
    IO.println(parsed.grouped(8).toList.map(_.map(_.padTo(18, ' ')).mkString(" ")).mkString("\n"))

  def findRecipes(extracted: List[Option[Archnemesis]]): List[(Archnemesis, Int, Set[Archnemesis])] =
    val flattened = extracted.flatten
    val ingredientMap = Archnemesis.values.map { nemesis =>
      nemesis -> nemesis.ingredients.toSet
    }.toList
    val nemesisSet = flattened.toSet
    val (notGotten, gotten) = ingredientMap.collect {
      case (nemesis, ingredients) if ingredients.nonEmpty && ingredients.subsetOf(nemesisSet) =>
        (nemesis, flattened.count(_ == nemesis), ingredients)
    }
      .sortBy(_._1.roundedReward)(Ordering[Double].reverse)
      .partition(_._2 == 0)
    notGotten ++ gotten
